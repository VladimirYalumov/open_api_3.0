"use strict";

var _utils = require("../../../utils");

class ValidateOpenAPILicense {
  static get rule() {
    return 'oas3-schema/license';
  }

  get validators() {
    return {
      name(node, ctx) {
        return !node || !node.name ? ctx.createError(ctx.messageHelpers.missingRequiredField('name'), 'key') : null;
      },

      url(node, ctx) {
        return node && node.url && !(0, _utils.isUrl)(node.url) ? ctx.createError('The url field must be a valid URL.', 'value') : null;
      }

    };
  }

  OpenAPILicense() {
    return {
      onEnter: (node, definition, ctx) => ctx.validateFields(this.config, this.rule, this.validators)
    };
  }

}

module.exports = ValidateOpenAPILicense;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy92aXNpdG9ycy9ydWxlcy9zdHJ1Y3R1cmFsL3ZhbGlkYXRlT3BlbkFQSUxpY2Vuc2UuanMiXSwibmFtZXMiOlsiVmFsaWRhdGVPcGVuQVBJTGljZW5zZSIsInJ1bGUiLCJ2YWxpZGF0b3JzIiwibmFtZSIsIm5vZGUiLCJjdHgiLCJjcmVhdGVFcnJvciIsIm1lc3NhZ2VIZWxwZXJzIiwibWlzc2luZ1JlcXVpcmVkRmllbGQiLCJ1cmwiLCJPcGVuQVBJTGljZW5zZSIsIm9uRW50ZXIiLCJkZWZpbml0aW9uIiwidmFsaWRhdGVGaWVsZHMiLCJjb25maWciLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUdBLE1BQU1BLHNCQUFOLENBQTZCO0FBQzNCLGFBQVdDLElBQVgsR0FBa0I7QUFDaEIsV0FBTyxxQkFBUDtBQUNEOztBQUVELE1BQUlDLFVBQUosR0FBaUI7QUFDZixXQUFPO0FBQ0xDLE1BQUFBLElBQUksQ0FBQ0MsSUFBRCxFQUFPQyxHQUFQLEVBQVk7QUFDZCxlQUFPLENBQUNELElBQUQsSUFBUyxDQUFDQSxJQUFJLENBQUNELElBQWYsR0FBc0JFLEdBQUcsQ0FBQ0MsV0FBSixDQUFnQkQsR0FBRyxDQUFDRSxjQUFKLENBQW1CQyxvQkFBbkIsQ0FBd0MsTUFBeEMsQ0FBaEIsRUFBaUUsS0FBakUsQ0FBdEIsR0FBZ0csSUFBdkc7QUFDRCxPQUhJOztBQUlMQyxNQUFBQSxHQUFHLENBQUNMLElBQUQsRUFBT0MsR0FBUCxFQUFZO0FBQ2IsZUFBT0QsSUFBSSxJQUFJQSxJQUFJLENBQUNLLEdBQWIsSUFBb0IsQ0FBQyxrQkFBTUwsSUFBSSxDQUFDSyxHQUFYLENBQXJCLEdBQXVDSixHQUFHLENBQUNDLFdBQUosQ0FBZ0Isb0NBQWhCLEVBQXNELE9BQXRELENBQXZDLEdBQXdHLElBQS9HO0FBQ0Q7O0FBTkksS0FBUDtBQVFEOztBQUVESSxFQUFBQSxjQUFjLEdBQUc7QUFDZixXQUFPO0FBQ0xDLE1BQUFBLE9BQU8sRUFBRSxDQUFDUCxJQUFELEVBQU9RLFVBQVAsRUFBbUJQLEdBQW5CLEtBQTJCQSxHQUFHLENBQUNRLGNBQUosQ0FDbEMsS0FBS0MsTUFENkIsRUFDckIsS0FBS2IsSUFEZ0IsRUFDVixLQUFLQyxVQURLO0FBRC9CLEtBQVA7QUFLRDs7QUF0QjBCOztBQXlCN0JhLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmhCLHNCQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzVXJsIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMnO1xuXG5cbmNsYXNzIFZhbGlkYXRlT3BlbkFQSUxpY2Vuc2Uge1xuICBzdGF0aWMgZ2V0IHJ1bGUoKSB7XG4gICAgcmV0dXJuICdvYXMzLXNjaGVtYS9saWNlbnNlJztcbiAgfVxuXG4gIGdldCB2YWxpZGF0b3JzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lKG5vZGUsIGN0eCkge1xuICAgICAgICByZXR1cm4gIW5vZGUgfHwgIW5vZGUubmFtZSA/IGN0eC5jcmVhdGVFcnJvcihjdHgubWVzc2FnZUhlbHBlcnMubWlzc2luZ1JlcXVpcmVkRmllbGQoJ25hbWUnKSwgJ2tleScpIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICB1cmwobm9kZSwgY3R4KSB7XG4gICAgICAgIHJldHVybiBub2RlICYmIG5vZGUudXJsICYmICFpc1VybChub2RlLnVybCkgPyBjdHguY3JlYXRlRXJyb3IoJ1RoZSB1cmwgZmllbGQgbXVzdCBiZSBhIHZhbGlkIFVSTC4nLCAndmFsdWUnKSA6IG51bGw7XG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBPcGVuQVBJTGljZW5zZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb25FbnRlcjogKG5vZGUsIGRlZmluaXRpb24sIGN0eCkgPT4gY3R4LnZhbGlkYXRlRmllbGRzKFxuICAgICAgICB0aGlzLmNvbmZpZywgdGhpcy5ydWxlLCB0aGlzLnZhbGlkYXRvcnMsXG4gICAgICApLFxuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBWYWxpZGF0ZU9wZW5BUElMaWNlbnNlO1xuIl19
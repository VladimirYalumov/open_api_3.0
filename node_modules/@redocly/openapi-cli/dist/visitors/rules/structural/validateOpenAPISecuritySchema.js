"use strict";

class ValidateOpenAPISecuritySchema {
  static get rule() {
    return 'oas3-schema/secuirty-schema';
  }

  get validators() {
    return {
      type(node, ctx) {
        if (!node.type) return ctx.createError(ctx.messageHelpers.missingRequiredField('type'), 'key');
        if (typeof node.type !== 'string') return ctx.createError(ctx.messageHelpers.fieldTypeMismatchMessageHelper('string'), 'value');
        if (!['apiKey', 'http', 'oauth2', 'openIdConnect'].includes(node.type)) return ctx.createError('The type value can only be one of the following "apiKey", "http", "oauth2", "openIdConnect" is required for the OpenAPI Security Scheme object.', 'value');
        return null;
      },

      description(node, ctx) {
        if (node.description && typeof node.description !== 'string') return ctx.createError(ctx.messageHelpers.fieldTypeMismatchMessageHelper('string'), 'value');
        return null;
      },

      name(node, ctx) {
        if (node.type !== 'apiKey') return null;
        if (typeof node.name !== 'string') return ctx.createError(ctx.messageHelpers.fieldTypeMismatchMessageHelper('string'), 'value');
        return null;
      },

      in(node, ctx) {
        if (node.type !== 'apiKey') return null;
        if (!node.in) return ctx.createError(ctx.messageHelpers.missingRequiredField('in'), 'key');
        if (typeof node.in !== 'string') return ctx.createError(ctx.messageHelpers.fieldTypeMismatchMessageHelper('string'), 'value');
        if (!['query', 'header', 'cookie'].includes(node.in)) return ctx.createError('The in value can only be one of the following "query", "header" or "cookie" for the OpenAPI Security Scheme object', 'value');
        return null;
      },

      scheme(node, ctx) {
        if (node.type !== 'http') return null;
        if (!node.scheme) return ctx.createError(ctx.messageHelpers.missingRequiredField('scheme'), 'key');
        if (typeof node.scheme !== 'string') return ctx.createError(ctx.messageHelpers.fieldTypeMismatchMessageHelper('string'), 'value');
        return null;
      },

      bearerFormat(node, ctx) {
        if (node.bearerFormat && node.type !== 'http') return ctx.createError('The bearerFormat field is applicable only for http', 'key');
        if (node.bearerFormat && typeof node.bearerFormat !== 'string') return ctx.createError(ctx.messageHelpers.fieldTypeMismatchMessageHelper('string'), 'value');
        return null;
      },

      flows(node, ctx) {
        if (node.type !== 'oauth2') return null;
        if (!node.flows) return ctx.createError(ctx.messageHelpers.missingRequiredField('flows'), 'key');
        return null;
      },

      openIdConnectUrl(node, ctx) {
        if (node.type !== 'openIdConnect') return null;
        if (!node.openIdConnectUrl) return ctx.createError(ctx.messageHelpers.missingRequiredField('openIdConnectUrl'), 'key');
        if (typeof node.openIdConnectUrl !== 'string') return ctx.createError(ctx.messageHelpers.fieldTypeMismatchMessageHelper('string'), 'value');
        return null;
      }

    };
  }

  OpenAPISecuritySchema() {
    return {
      onEnter: (node, definition, ctx) => ctx.validateFields(this.config, this.rule, this.validators)
    };
  }

}

module.exports = ValidateOpenAPISecuritySchema;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy92aXNpdG9ycy9ydWxlcy9zdHJ1Y3R1cmFsL3ZhbGlkYXRlT3BlbkFQSVNlY3VyaXR5U2NoZW1hLmpzIl0sIm5hbWVzIjpbIlZhbGlkYXRlT3BlbkFQSVNlY3VyaXR5U2NoZW1hIiwicnVsZSIsInZhbGlkYXRvcnMiLCJ0eXBlIiwibm9kZSIsImN0eCIsImNyZWF0ZUVycm9yIiwibWVzc2FnZUhlbHBlcnMiLCJtaXNzaW5nUmVxdWlyZWRGaWVsZCIsImZpZWxkVHlwZU1pc21hdGNoTWVzc2FnZUhlbHBlciIsImluY2x1ZGVzIiwiZGVzY3JpcHRpb24iLCJuYW1lIiwiaW4iLCJzY2hlbWUiLCJiZWFyZXJGb3JtYXQiLCJmbG93cyIsIm9wZW5JZENvbm5lY3RVcmwiLCJPcGVuQVBJU2VjdXJpdHlTY2hlbWEiLCJvbkVudGVyIiwiZGVmaW5pdGlvbiIsInZhbGlkYXRlRmllbGRzIiwiY29uZmlnIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSw2QkFBTixDQUFvQztBQUNsQyxhQUFXQyxJQUFYLEdBQWtCO0FBQ2hCLFdBQU8sNkJBQVA7QUFDRDs7QUFFRCxNQUFJQyxVQUFKLEdBQWlCO0FBQ2YsV0FBTztBQUNMQyxNQUFBQSxJQUFJLENBQUNDLElBQUQsRUFBT0MsR0FBUCxFQUFZO0FBQ2QsWUFBSSxDQUFDRCxJQUFJLENBQUNELElBQVYsRUFBZ0IsT0FBT0UsR0FBRyxDQUFDQyxXQUFKLENBQWdCRCxHQUFHLENBQUNFLGNBQUosQ0FBbUJDLG9CQUFuQixDQUF3QyxNQUF4QyxDQUFoQixFQUFpRSxLQUFqRSxDQUFQO0FBQ2hCLFlBQUksT0FBT0osSUFBSSxDQUFDRCxJQUFaLEtBQXFCLFFBQXpCLEVBQW1DLE9BQU9FLEdBQUcsQ0FBQ0MsV0FBSixDQUFnQkQsR0FBRyxDQUFDRSxjQUFKLENBQW1CRSw4QkFBbkIsQ0FBa0QsUUFBbEQsQ0FBaEIsRUFBNkUsT0FBN0UsQ0FBUDtBQUNuQyxZQUFJLENB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cUIsR0FBRztBQUN0QixXQUFPO0FBQ0xDLE1BQUFBLE9BQU8sRUFBRSxDQUFDZixJQUFELEVBQU9nQixVQUFQLEVBQW1CZixHQUFuQixLQUEyQkEsR0FBRyxDQUFDZ0IsY0FBSixDQUNsQyxLQUFLQyxNQUQ2QixFQUNyQixLQUFLckIsSUFEZ0IsRUFDVixLQUFLQyxVQURLO0FBRC9CLEtBQVA7QUFLRDs7QUE1RGlDOztBQStEcENxQixNQUFNLENBQUNDLE9BQVAsR0FBaUJ4Qiw2QkFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBWYWxpZGF0ZU9wZW5BUElTZWN1cml0eVNjaGVtYSB7XG4gIHN0YXRpYyBnZXQgcnVsZSgpIHtcbiAgICByZXR1cm4gJ29hczMtc2NoZW1hL3NlY3VpcnR5LXNjaGVtYSc7XG4gIH1cblxuICBnZXQgdmFsaWRhdG9ycygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZShub2RlLCBjdHgpIHtcbiAgICAgICAgaWYgKCFub2RlLnR5cGUpIHJldHVybiBjdHguY3JlYXRlRXJyb3IoY3R4Lm1lc3NhZ2VIZWxwZXJzLm1pc3NpbmdSZXF1aXJlZEZpZWxkKCd0eXBlJyksICdrZXknKTtcbiAgICAgICAgaWYgKHR5cGVvZiBub2RlLnR5cGUgIT09ICdzdHJpbmcnKSByZXR1cm4gY3R4LmNyZWF0ZUVycm9yKGN0eC5tZXNzYWdlSGVscGVycy5maWVsZFR5cGVNaXNtYXRjaE1lc3NhZ2VIZWxwZXIoJ3N0cmluZycpLCAndmFsdWUnKTtcbiAgICAgICAgaWYgKCFbJ2FwaUtleScsICdodHRwJywgJ29hdXRoMicsICdvcGVuSWRDb25uZWN0J10uaW5jbHVkZXMobm9kZS50eXBlKSkgcmV0dXJuIGN0eC5jcmVhdGVFcnJvcignVGhlIHR5cGUgdmFsdWUgY2FuIG9ubHkgYmUgb25lIG9mIHRoZSBmb2xsb3dpbmcgXCJhcGlLZXlcIiwgXCJodHRwXCIsIFwib2F1dGgyXCIsIFwib3BlbklkQ29ubmVjdFwiIGlzIHJlcXVpcmVkIGZvciB0aGUgT3BlbkFQSSBTZWN1cml0eSBTY2hlbWUgb2JqZWN0LicsICd2YWx1ZScpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbihub2RlLCBjdHgpIHtcbiAgICAgICAgaWYgKG5vZGUuZGVzY3JpcHRpb24gJiYgdHlwZW9mIG5vZGUuZGVzY3JpcHRpb24gIT09ICdzdHJpbmcnKSByZXR1cm4gY3R4LmNyZWF0ZUVycm9yKGN0eC5tZXNzYWdlSGVscGVycy5maWVsZFR5cGVNaXNtYXRjaE1lc3NhZ2VIZWxwZXIoJ3N0cmluZycpLCAndmFsdWUnKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9LFxuICAgICAgbmFtZShub2RlLCBjdHgpIHtcbiAgICAgICAgaWYgKG5vZGUudHlwZSAhPT0gJ2FwaUtleScpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAodHlwZW9mIG5vZGUubmFtZSAhPT0gJ3N0cmluZycpIHJldHVybiBjdHguY3JlYXRlRXJyb3IoY3R4Lm1lc3NhZ2VIZWxwZXJzLmZpZWxkVHlwZU1pc21hdGNoTWVzc2FnZUhlbHBlcignc3RyaW5nJyksICd2YWx1ZScpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0sXG4gICAgICBpbihub2RlLCBjdHgpIHtcbiAgICAgICAgaWYgKG5vZGUudHlwZSAhPT0gJ2FwaUtleScpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoIW5vZGUuaW4pIHJldHVybiBjdHguY3JlYXRlRXJyb3IoY3R4Lm1lc3NhZ2VIZWxwZXJzLm1pc3NpbmdSZXF1aXJlZEZpZWxkKCdpbicpLCAna2V5Jyk7XG4gICAgICAgIGlmICh0eXBlb2Ygbm9kZS5pbiAhPT0gJ3N0cmluZycpIHJldHVybiBjdHguY3JlYXRlRXJyb3IoY3R4Lm1lc3NhZ2VIZWxwZXJzLmZpZWxkVHlwZU1pc21hdGNoTWVzc2FnZUhlbHBlcignc3RyaW5nJyksICd2YWx1ZScpO1xuICAgICAgICBpZiAoIVsncXVlcnknLCAnaGVhZGVyJywgJ2Nvb2tpZSddLmluY2x1ZGVzKG5vZGUuaW4pKSByZXR1cm4gY3R4LmNyZWF0ZUVycm9yKCdUaGUgaW4gdmFsdWUgY2FuIG9ubHkgYmUgb25lIG9mIHRoZSBmb2xsb3dpbmcgXCJxdWVyeVwiLCBcImhlYWRlclwiIG9yIFwiY29va2llXCIgZm9yIHRoZSBPcGVuQVBJIFNlY3VyaXR5IFNjaGVtZSBvYmplY3QnLCAndmFsdWUnKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9LFxuICAgICAgc2NoZW1lKG5vZGUsIGN0eCkge1xuICAgICAgICBpZiAobm9kZS50eXBlICE9PSAnaHR0cCcpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoIW5vZGUuc2NoZW1lKSByZXR1cm4gY3R4LmNyZWF0ZUVycm9yKGN0eC5tZXNzYWdlSGVscGVycy5taXNzaW5nUmVxdWlyZWRGaWVsZCgnc2NoZW1lJyksICdrZXknKTtcbiAgICAgICAgaWYgKHR5cGVvZiBub2RlLnNjaGVtZSAhPT0gJ3N0cmluZycpIHJldHVybiBjdHguY3JlYXRlRXJyb3IoY3R4Lm1lc3NhZ2VIZWxwZXJzLmZpZWxkVHlwZU1pc21hdGNoTWVzc2FnZUhlbHBlcignc3RyaW5nJyksICd2YWx1ZScpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0sXG4gICAgICBiZWFyZXJGb3JtYXQobm9kZSwgY3R4KSB7XG4gICAgICAgIGlmIChub2RlLmJlYXJlckZvcm1hdCAmJiBub2RlLnR5cGUgIT09ICdodHRwJykgcmV0dXJuIGN0eC5jcmVhdGVFcnJvcignVGhlIGJlYXJlckZvcm1hdCBmaWVsZCBpcyBhcHBsaWNhYmxlIG9ubHkgZm9yIGh0dHAnLCAna2V5Jyk7XG4gICAgICAgIGlmIChub2RlLmJlYXJlckZvcm1hdCAmJiB0eXBlb2Ygbm9kZS5iZWFyZXJGb3JtYXQgIT09ICdzdHJpbmcnKSByZXR1cm4gY3R4LmNyZWF0ZUVycm9yKGN0eC5tZXNzYWdlSGVscGVycy5maWVsZFR5cGVNaXNtYXRjaE1lc3NhZ2VIZWxwZXIoJ3N0cmluZycpLCAndmFsdWUnKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9LFxuICAgICAgZmxvd3Mobm9kZSwgY3R4KSB7XG4gICAgICAgIGlmIChub2RlLnR5cGUgIT09ICdvYXV0aDInKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKCFub2RlLmZsb3dzKSByZXR1cm4gY3R4LmNyZWF0ZUVycm9yKGN0eC5tZXNzYWdlSGVscGVycy5taXNzaW5nUmVxdWlyZWRGaWVsZCgnZmxvd3MnKSwgJ2tleScpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0sXG4gICAgICBvcGVuSWRDb25uZWN0VXJsKG5vZGUsIGN0eCkge1xuICAgICAgICBpZiAobm9kZS50eXBlICE9PSAnb3BlbklkQ29ubmVjdCcpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoIW5vZGUub3BlbklkQ29ubmVjdFVybCkgcmV0dXJuIGN0eC5jcmVhdGVFcnJvcihjdHgubWVzc2FnZUhlbHBlcnMubWlzc2luZ1JlcXVpcmVkRmllbGQoJ29wZW5JZENvbm5lY3RVcmwnKSwgJ2tleScpO1xuICAgICAgICBpZiAodHlwZW9mIG5vZGUub3BlbklkQ29ubmVjdFVybCAhPT0gJ3N0cmluZycpIHJldHVybiBjdHguY3JlYXRlRXJyb3IoY3R4Lm1lc3NhZ2VIZWxwZXJzLmZpZWxkVHlwZU1pc21hdGNoTWVzc2FnZUhlbHBlcignc3RyaW5nJyksICd2YWx1ZScpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIE9wZW5BUElTZWN1cml0eVNjaGVtYSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb25FbnRlcjogKG5vZGUsIGRlZmluaXRpb24sIGN0eCkgPT4gY3R4LnZhbGlkYXRlRmllbGRzKFxuICAgICAgICB0aGlzLmNvbmZpZywgdGhpcy5ydWxlLCB0aGlzLnZhbGlkYXRvcnMsXG4gICAgICApLFxuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBWYWxpZGF0ZU9wZW5BUElTZWN1cml0eVNjaGVtYTtcbiJdfQ==
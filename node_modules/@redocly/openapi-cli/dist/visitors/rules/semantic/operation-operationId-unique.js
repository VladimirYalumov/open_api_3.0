"use strict";

class OperationIdUnique {
  static get rule() {
    return 'operation-operationId-unique';
  }

  constructor(config) {
    this.config = config;
    this.operationIds = {};
  }

  OpenAPIOperation() {
    return {
      onEnter: (node, definition, ctx) => {
        if (node.operationId) {
          if (this.operationIds[node.operationId]) {
            this.operationIds[node.operationId] += 1;
            return [ctx.createError('The "operationId" fields must be unique.', 'value')];
          }

          this.operationIds[node.operationId] = 1;
        }

        return null;
      }
    };
  }

}

module.exports = OperationIdUnique;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy92aXNpdG9ycy9ydWxlcy9zZW1hbnRpYy9vcGVyYXRpb24tb3BlcmF0aW9uSWQtdW5pcXVlLmpzIl0sIm5hbWVzIjpbIk9wZXJhdGlvbklkVW5pcXVlIiwicnVsZSIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwib3BlcmF0aW9uSWRzIiwiT3BlbkFQSU9wZXJhdGlvbiIsIm9uRW50ZXIiLCJub2RlIiwiZGVmaW5pdGlvbiIsImN0eCIsIm9wZXJhdGlvbklkIiwiY3JlYXRlRXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLGlCQUFOLENBQXdCO0FBQ3RCLGFBQVdDLElBQVgsR0FBa0I7QUFDaEIsV0FBTyw4QkFBUDtBQUNEOztBQUVEQyxFQUFBQSxXQUFXLENBQUNDLE1BQUQsRUFBUztBQUNsQixTQUFLQSxNQUFMLEdBQWNBLE1BQWQ7QUFDQSxTQUFLQyxZQUFMLEdBQW9CLEVBQXBCO0FBQ0Q7O0FBRURDLEVBQUFBLGdCQUFnQixHQUFHO0FBQ2pCLFdBQU87QUFDTEMsTUFBQUEsT0FBTyxFQUFFLENBQUNDLElBQUQsRUFBT0MsVUFBUCxFQUFtQkMsR0FBbkIsS0FBMkI7QUFDbEMsWUFBSUYsSUFBSSxDQUFDRyxXQUFULEVBQXNCO0FBQ3BCLGNBQUksS0FBS04sWUFBTCxDQUFrQkcsSUFBSSxDQUFDRyxXQUF2QixDQUFKLEVBQXlDO0FBQ3ZDLGlCQUFLTixZQUFMLENBQWtCRyxJQUFJLENBQUNHLFdBQXZCLEtBQXVDLENBQXZDO0FBQ0EsbUJBQU8sQ0FBQ0QsR0FBRyxDQUFDRSxXQUFKLENBQWdCLDBDQUFoQixFQUE0RCxPQUE1RCxDQUFELENBQVA7QUFDRDs7QUFDRCxlQUFLUCxZQUFMLENBQWtCRyxJQUFJLENBQUNHLFdBQXZCLElBQXNDLENBQXRDO0FBQ0Q7O0FBQ0QsZUFBTyxJQUFQO0FBQ0Q7QUFWSSxLQUFQO0FBWUQ7O0FBdkJxQjs7QUEwQnhCRSxNQUFNLENBQUNDLE9BQVAsR0FBaUJiLGlCQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIE9wZXJhdGlvbklkVW5pcXVlIHtcbiAgc3RhdGljIGdldCBydWxlKCkge1xuICAgIHJldHVybiAnb3BlcmF0aW9uLW9wZXJhdGlvbklkLXVuaXF1ZSc7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLm9wZXJhdGlvbklkcyA9IHt9O1xuICB9XG5cbiAgT3BlbkFQSU9wZXJhdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb25FbnRlcjogKG5vZGUsIGRlZmluaXRpb24sIGN0eCkgPT4ge1xuICAgICAgICBpZiAobm9kZS5vcGVyYXRpb25JZCkge1xuICAgICAgICAgIGlmICh0aGlzLm9wZXJhdGlvbklkc1tub2RlLm9wZXJhdGlvbklkXSkge1xuICAgICAgICAgICAgdGhpcy5vcGVyYXRpb25JZHNbbm9kZS5vcGVyYXRpb25JZF0gKz0gMTtcbiAgICAgICAgICAgIHJldHVybiBbY3R4LmNyZWF0ZUVycm9yKCdUaGUgXCJvcGVyYXRpb25JZFwiIGZpZWxkcyBtdXN0IGJlIHVuaXF1ZS4nLCAndmFsdWUnKV07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMub3BlcmF0aW9uSWRzW25vZGUub3BlcmF0aW9uSWRdID0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE9wZXJhdGlvbklkVW5pcXVlO1xuIl19